/**
	CUSTOM FUNCTIONS/VARS NEEDED: 
	 - $module: get the found module
	 - $module_path(backSteps): The path of the module | backSteps: how many layers above you want to get (0 = direct path; 1= parent path, ...)
	 - $var(var_name) returns the value of a var or undefined if not defined

	Other stuff: String combining ($var() or "simple string"), "value": array oder object
*/
{
	"entity": {
		"regions": [
			{
				"name": "events",
				"parse": [ "minecraft:entity/events" ],
				"modules": [
					{
						"define": "$is_path(../events/./add/effects)",
						"foreach_index": false,
						"vars": {
							"uuid": "$small_uuid"
						},
						"modify": [
							{
								"path": "minecraft:entity/component_groups",
								"method": "replace",
								"values": [
									{
										"key": "($var(0/name) + $var(0/amplifier) + $var(0/duration) + $var(0/visible) + $var(0/ambient) + $var(uuid))",
										"template": {
											"minecraft:spell_effects": {
												"add_effects": "$module"
											}
										}
									}
								]
							},
							{
								"path": "($module_path(1) + /component_groups)",
								"method": "append",
								"values": [
									{
										"key": "list",
										"template": "($var(0/name) + $var(0/amplifier) + $var(0/duration) + $var(0/visible) + $var(0/ambient) + $var(uuid))"
									}
								]
							}
						]
					},
					{
						"define": "$is_path(../events/./add/components)",
						"foreach_index": false,
						"vars": {
							"uuid": "$uuid"
						},
						"modify": [
							{
								"path": "minecraft:entity/component_groups",
								"method": "replace",
								"values": [
									{
										"key": "$var(uuid)",
										"template": "$module"
									}
								]
							},
							{
								"path": "($module_path(1) + /component_groups)",
								"method": "append",
								"values": [
									{
										"key": "list",
										"template": "$var(uuid)"
									}
								]
							}
						]
					}
				]
			}
		]
	}
}